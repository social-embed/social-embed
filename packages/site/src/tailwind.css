@layer base, theme, components, utilities;

@import "tailwindcss/preflight.css" layer(base);
@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/utilities.css" layer(utilities);

/* Configure dark: variant to use data-theme attribute instead of prefers-color-scheme */
@custom-variant dark (&:is([data-theme="dark"] *));

/* Reroll button animations */
@keyframes spin-dice {
  from {
    transform: rotate(0deg) scale(1);
  }
  50% {
    transform: rotate(180deg) scale(1.2);
  }
  to {
    transform: rotate(360deg) scale(1);
  }
}

@keyframes bounce-pop {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
  }
  100% {
    transform: scale(1);
  }
}

@theme {
  /* Font configuration using Astro's experimental fonts API */
  --font-mono: var(--font-ibm-plex-mono);
  --font-sans: var(--font-ibm-plex-sans);

  /* Define slate colors for use in dark mode */
  --color-slate-50: #f8fafc;
  --color-slate-100: #f1f5f9;
  --color-slate-200: #e2e8f0;
  --color-slate-300: #cbd5e1;
  --color-slate-400: #94a3b8;
  --color-slate-500: #64748b;
  --color-slate-600: #475569;
  --color-slate-700: #334155;
  --color-slate-800: #1e293b;
  --color-slate-900: #0f172a;
  --color-slate-950: #020617;

  /* Microviz OKLCH series colors - perceptually consistent palette */
  --color-mv-blue: oklch(0.65 0.15 250);
  --color-mv-teal: oklch(0.7 0.15 150);
  --color-mv-yellow: oklch(0.72 0.15 80);
  --color-mv-orange: oklch(0.72 0.12 30);
  --color-mv-red: oklch(0.68 0.14 10);
  --color-mv-purple: oklch(0.67 0.16 295);
  --color-mv-cyan: oklch(0.71 0.14 200);
  --color-mv-green: oklch(0.73 0.13 120);

  /* Light variants (for light mode backgrounds) */
  --color-mv-blue-light: color-mix(in oklch, oklch(0.65 0.15 250), white 80%);
  --color-mv-teal-light: color-mix(in oklch, oklch(0.7 0.15 150), white 80%);
  --color-mv-yellow-light: color-mix(in oklch, oklch(0.72 0.15 80), white 80%);
  --color-mv-orange-light: color-mix(in oklch, oklch(0.72 0.12 30), white 80%);
  --color-mv-red-light: color-mix(in oklch, oklch(0.68 0.14 10), white 80%);
  --color-mv-purple-light: color-mix(in oklch, oklch(0.67 0.16 295), white 80%);
  --color-mv-cyan-light: color-mix(in oklch, oklch(0.71 0.14 200), white 80%);
  --color-mv-green-light: color-mix(in oklch, oklch(0.73 0.13 120), white 80%);

  /* Dark variants (for dark mode backgrounds) */
  --color-mv-blue-dark: color-mix(in oklch, oklch(0.65 0.15 250), black 30%);
  --color-mv-teal-dark: color-mix(in oklch, oklch(0.7 0.15 150), black 30%);
  --color-mv-yellow-dark: color-mix(in oklch, oklch(0.72 0.15 80), black 30%);
  --color-mv-orange-dark: color-mix(in oklch, oklch(0.72 0.12 30), black 30%);
  --color-mv-red-dark: color-mix(in oklch, oklch(0.68 0.14 10), black 30%);
  --color-mv-purple-dark: color-mix(in oklch, oklch(0.67 0.16 295), black 30%);
  --color-mv-cyan-dark: color-mix(in oklch, oklch(0.71 0.14 200), black 30%);
  --color-mv-green-dark: color-mix(in oklch, oklch(0.73 0.13 120), black 30%);
}

/**
 * Core navigation variables - source of truth for layouts.
 * Both homepage and doc layouts use zero header padding.
 * Inner elements (logo, right-group) handle their own spacing via --nav-inner-pad.
 */
:root {
  /* Navigation dimensions */
  --nav-height: 3.5rem;
  --nav-pad-x: 0;
  --nav-pad-y: 0;
  --nav-gap: 1rem;
  --nav-inner-pad: 1rem; /* Padding for inner elements (logo, right-group) */

  /* Navigation colors (dark mode default) */
  --nav-bg: rgba(15, 23, 42, 0.95); /* slate-900/95 */
  --nav-border: var(--color-slate-700);
  --nav-text: var(--color-slate-100);
  --nav-text-muted: var(--color-slate-400);

  /* Search button colors (dark mode default) */
  --search-icon: var(--color-slate-200);
  --search-text: var(--color-slate-300);
  --search-border: var(--color-slate-700);
  --search-bg: var(--color-slate-900);
  --search-kbd-bg: var(--color-slate-800);
  --search-hover-border: var(--color-slate-300);
  --search-hover-text: var(--color-slate-100);

  /* Shadow scale (Elastic pattern) */
  --search-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --search-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);

  /* Transition timing */
  --search-transition-fast: 100ms;
  --search-transition-normal: 150ms;

  /* Focus ring */
  --search-focus-ring: var(--color-mv-blue);

  /* Search results colors (dark mode default) */
  --search-result-bg: var(--color-slate-800);
  --search-result-hover-bg: var(--color-slate-700);
  --search-result-selected-bg: color-mix(
    in oklch,
    var(--color-mv-blue),
    transparent 85%
  );
  --search-result-selected-border: var(--color-mv-blue);
  /* Selected: distinct shadow + border (not just inset) */
  --search-result-selected-shadow: 0 0 0 1px var(--color-mv-blue), var(--search-shadow-sm);
  /* Dark mode - improved visibility (50% transparent instead of 70%) */
  --search-mark-bg: color-mix(in oklch, var(--color-mv-blue), transparent 50%);
  --search-breadcrumb: var(--color-slate-500);
  --search-subresult-bg: var(--color-slate-900);
}

[data-theme="light"] {
  --nav-bg: rgba(255, 255, 255, 0.95); /* white/95 */
  --nav-border: var(--color-slate-200);
  --nav-text: var(--color-slate-900);
  --nav-text-muted: var(--color-slate-600);

  /* Search button colors (light mode) */
  --search-icon: var(--color-slate-500);
  --search-text: var(--color-slate-500);
  --search-border: var(--color-slate-300);
  --search-bg: var(--color-slate-50);
  --search-kbd-bg: var(--color-slate-200);
  --search-hover-border: var(--color-slate-400);
  --search-hover-text: var(--color-slate-700);

  /* Search results colors (light mode) */
  /* Bump from slate-50 to slate-100 for visible contrast against white dialog */
  --search-result-bg: var(--color-slate-100);
  --search-result-hover-bg: var(--color-slate-200);
  --search-result-selected-bg: color-mix(
    in oklch,
    var(--color-mv-blue),
    white 90%
  );
  --search-result-selected-border: var(--color-mv-blue);
  /* Light mode - improved visibility (60% white instead of 80%) */
  --search-mark-bg: color-mix(in oklch, var(--color-mv-blue), white 60%);
  --search-breadcrumb: var(--color-slate-400);
  --search-subresult-bg: var(--color-slate-50);
}
