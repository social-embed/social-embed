---
/**
 * Aside component with variant styling options for demo/comparison.
 * Variants: classic, refined, card, minimal, hybrid
 */
interface Props {
  type?: "note" | "tip" | "caution" | "danger";
  title?: string;
  variant?: "classic" | "refined" | "card" | "minimal" | "hybrid";
}

const { type = "note", title, variant = "classic" } = Astro.props;

const icons: Record<string, string> = {
  caution: "M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",
  danger:
    "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",
  note: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",
  tip: "M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z",
};

const defaultTitles: Record<string, string> = {
  caution: "Caution",
  danger: "Danger",
  note: "Note",
  tip: "Tip",
};
---

<aside class:list={["aside", `aside-${type}`, `aside-${variant}`]} role="note">
  <p class="aside-title">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="20"
      height="20"
      fill="currentColor"
      aria-hidden="true"
    >
      <path d={icons[type]} />
    </svg>
    <span>{title || defaultTitles[type]}</span>
  </p>
  <div class="aside-content">
    <slot />
  </div>
</aside>

<style>
  /* ========================================
   * BASE STYLES (shared across all variants)
   * ======================================== */
  .aside {
    --aside-color: var(--color-mv-blue);
    --aside-bg: var(--color-mv-blue-light);
  }

  .aside-note {
    --aside-color: var(--color-mv-blue);
    --aside-bg: var(--color-mv-blue-light);
  }

  .aside-tip {
    --aside-color: var(--color-mv-green);
    --aside-bg: var(--color-mv-green-light);
  }

  .aside-caution {
    --aside-color: var(--color-mv-yellow);
    --aside-bg: var(--color-mv-yellow-light);
  }

  .aside-danger {
    --aside-color: var(--color-mv-red);
    --aside-bg: var(--color-mv-red-light);
  }

  .aside-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
    color: var(--aside-color);
  }

  :global([data-theme="dark"]) .aside-title {
    color: color-mix(in oklch, var(--aside-color), white 30%);
  }

  .aside-content {
    color: var(--color-slate-700);
  }

  :global([data-theme="dark"]) .aside-content {
    color: var(--color-slate-300);
  }

  .aside-content :global(p) {
    margin: 0;
  }

  .aside-content :global(p + p) {
    margin-top: 0.75rem;
  }

  /* ========================================
   * VARIANT: CLASSIC (current production style)
   * ======================================== */
  .aside-classic {
    border-left: 4px solid var(--aside-color);
    padding: 1rem 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0 0.5rem 0.5rem 0;
    background: var(--aside-bg);
  }

  :global([data-theme="dark"]) .aside-classic {
    --aside-bg: color-mix(in oklch, var(--aside-color), transparent 85%);
  }

  /* ========================================
   * VARIANT: REFINED (Option A)
   * Gradient background + icon pill
   * ======================================== */
  .aside-refined {
    border-left: 5px solid var(--aside-color);
    padding: 1rem 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0 0.5rem 0.5rem 0;
    background: linear-gradient(
      to right,
      var(--aside-bg),
      color-mix(in oklch, var(--aside-bg), white 60%) 100%
    );
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  }

  .aside-refined .aside-title svg {
    padding: 0.25rem;
    background: color-mix(in oklch, var(--aside-color), white 70%);
    border-radius: 0.375rem;
  }

  :global([data-theme="dark"]) .aside-refined {
    --aside-bg: color-mix(in oklch, var(--aside-color), transparent 85%);
    background: linear-gradient(
      to right,
      var(--aside-bg),
      color-mix(in oklch, var(--aside-bg), transparent 40%) 100%
    );
    border-left-color: color-mix(in oklch, var(--aside-color), white 15%);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  }

  :global([data-theme="dark"]) .aside-refined .aside-title svg {
    background: color-mix(in oklch, var(--aside-color), transparent 70%);
  }

  /* ========================================
   * VARIANT: CARD (Option B)
   * Full border card + colored icon badge
   * ======================================== */
  .aside-card {
    border: 1px solid color-mix(in oklch, var(--aside-color), white 70%);
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1.5rem 0;
    background: color-mix(in oklch, var(--aside-color), white 92%);
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  .aside-card .aside-title svg {
    padding: 0.375rem;
    background: var(--aside-color);
    color: white;
    border-radius: 0.5rem;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  :global([data-theme="dark"]) .aside-card {
    background: color-mix(in oklch, var(--aside-color), transparent 88%);
    border-color: color-mix(in oklch, var(--aside-color), transparent 65%);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 color-mix(in oklch, var(--aside-color), transparent 80%);
  }

  :global([data-theme="dark"]) .aside-card .aside-title svg {
    background: color-mix(in oklch, var(--aside-color), white 10%);
  }

  /* ========================================
   * VARIANT: MINIMAL (Option C)
   * Top border only, uppercase title
   * ======================================== */
  .aside-minimal {
    border-top: 2px solid var(--aside-color);
    border-radius: 0;
    padding: 1rem 0 1rem 1rem;
    margin: 1.5rem 0;
    background: color-mix(in oklch, var(--aside-color), white 96%);
    box-shadow: none;
  }

  .aside-minimal .aside-title {
    font-size: 0.8125rem;
    letter-spacing: 0.025em;
    text-transform: uppercase;
  }

  .aside-minimal .aside-title svg {
    width: 16px;
    height: 16px;
    opacity: 0.85;
  }

  :global([data-theme="dark"]) .aside-minimal {
    background: color-mix(in oklch, var(--aside-color), transparent 94%);
    border-top-color: color-mix(in oklch, var(--aside-color), white 20%);
  }

  :global([data-theme="dark"]) .aside-minimal .aside-content {
    color: var(--color-slate-400);
  }

  /* ========================================
   * VARIANT: HYBRID (Recommended)
   * Left border + gradient + colored icon badge
   * ======================================== */
  .aside-hybrid {
    border-left: 5px solid var(--aside-color);
    padding: 1rem 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0 0.5rem 0.5rem 0;
    background: linear-gradient(
      to right,
      var(--aside-bg),
      color-mix(in oklch, var(--aside-bg), white 60%) 100%
    );
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  }

  .aside-hybrid .aside-title svg {
    padding: 0.375rem;
    background: var(--aside-color);
    color: white;
    border-radius: 0.5rem;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  }

  :global([data-theme="dark"]) .aside-hybrid {
    --aside-bg: color-mix(in oklch, var(--aside-color), transparent 85%);
    background: linear-gradient(
      to right,
      var(--aside-bg),
      color-mix(in oklch, var(--aside-bg), transparent 40%) 100%
    );
    border-left-color: color-mix(in oklch, var(--aside-color), white 15%);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  }

  :global([data-theme="dark"]) .aside-hybrid .aside-title svg {
    background: color-mix(in oklch, var(--aside-color), white 10%);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }
</style>
